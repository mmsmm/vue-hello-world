import{r,c as Me,o as Ce,a as m,b as L,d,e,f as $e,t as v,F as B,g as F,n as H,h as ae,w as Se,i as Ve,j as Ie,k as Oe,v as Pe,l as Le,m as Ee}from"./vendor-BHCNLk8k.js";(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))y(i);new MutationObserver(i=>{for(const p of i)if(p.type==="childList")for(const g of p.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&y(g)}).observe(document,{childList:!0,subtree:!0});function x(i){const p={};return i.integrity&&(p.integrity=i.integrity),i.referrerPolicy&&(p.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?p.credentials="include":i.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function y(i){if(i.ep)return;i.ep=!0;const p=x(i);fetch(i.href,p)}})();const ve=(E,_)=>{const x=E.__vccOpts||E;for(const[y,i]of _)x[y]=i;return x},Ge={class:"start-screen"},Ne={class:"password-hint"},qe={class:"password-text"},Re={key:1,class:"rhythm-password-game"},De={class:"top-section"},Be={class:"password-display"},Fe={class:"encouragement"},He={class:"game-area",ref:"gameArea"},Ye={class:"tracks-container"},We=["onMousedown","onTouchstart"],je={class:"note-char"},ze={class:"effect-text"},Ke={class:"bottom-section"},Ue={class:"progress-display"},Xe={class:"combo-number"},Je={class:"accuracy-display"},Qe={class:"accuracy-label"},Ze={class:"hp-bar"},et={key:0,class:"game-over-overlay"},tt={class:"game-over-content"},st={class:"fail-message"},at={class:"stats"},ot={key:2,class:"success-screen"},lt={class:"success-content"},nt={class:"success-stats"},it={class:"stat-item"},rt={class:"stat-value"},ct={class:"stat-item"},ut={class:"stat-value"},dt={class:"stat-item"},vt={class:"stat-value"},mt={class:"rating"},pt={class:"rating-text"},ft={__name:"RhythmPassword",emits:["success"],setup(E,{emit:_}){const x=_,y=r(!1),i=r(!1),p=r(!1),g=r("happeny"),w=r(0),V=r(0),G=r([{id:1,x:0},{id:2,x:1},{id:3,x:2},{id:4,x:3},{id:5,x:4}]),A=r([]),J=r(0),f=r(0),l=r(0),k=r(100),N=r(""),S=r([]),me=r(0),q=r(0),Y=r(0),W=r(0);let o=null,M=null,R=[];r(null);let I=null,D=0,oe=0,j=null,z=null;const Q=["加油啊朋友，你肯定行的！","跟随节奏，你能做到！","手速up！节奏感up！","就是这样，继续保持！","音乐在你心中！"],Z=r(Q[0]),le=["节奏不对哦~","密码：happeny，记住了吗？","要不要我放慢点？（并不会）","建议先去练练手速","你的手指还好吗？","节奏感需要练习哦~","奶奶都比你快"],ne=r(""),O=Me(()=>{const s=q.value+Y.value+W.value;return s===0?100:Math.round((q.value+Y.value)/s*100)}),pe=()=>{y.value=!0,i.value=!1,w.value=0,f.value=0,k.value=100,A.value=[],S.value=[],V.value++,fe(),he(),oe=Date.now(),D=0,I=setInterval(ge,1e3/60),setInterval(()=>{Z.value=Q[Math.floor(Math.random()*Q.length)]},5e3)},fe=()=>{try{M||(M=new Audio("/base.wav"),M.loop=!0,M.volume=.5),M.currentTime=0;const s=M.play();s!==void 0&&s.catch(t=>{console.log("外部音频文件不存在或播放失败，使用合成音乐:",t),ie()})}catch(s){console.log("音频加载失败，使用合成音乐:",s),ie()}};let K=null;const ie=()=>{try{o||(o=new(window.AudioContext||window.webkitAudioContext));const s=[[261.63,329.63,392],[220,261.63,329.63],[174.61,220,261.63],[196,246.94,293.66]];let t=0;const n=60/120,T=()=>{if(!o)return;const u=o.currentTime;s[t%s.length].forEach(($,X)=>{const C=o.createOscillator(),P=o.createGain();C.connect(P),P.connect(o.destination),C.frequency.value=$,C.type="sine";const de=.03;P.gain.setValueAtTime(0,u),P.gain.linearRampToValueAtTime(de,u+.05),P.gain.linearRampToValueAtTime(de*.7,u+n*2-.1),P.gain.linearRampToValueAtTime(.001,u+n*2),C.start(u),C.stop(u+n*2)});const h=o.createOscillator(),b=o.createGain();h.connect(b),b.connect(o.destination),h.frequency.value=80,h.type="triangle",b.gain.setValueAtTime(.08,u),b.gain.exponentialRampToValueAtTime(.001,u+.1),h.start(u),h.stop(u+.1),t++};T(),K=setInterval(T,n*2e3)}catch(s){console.log("Web Audio API 不可用:",s)}},ee=()=>{M&&(M.pause(),M.currentTime=0),K&&(clearInterval(K),K=null)},he=()=>{R=[];const t=60/120*1e3,a=40,n=g.value.split(""),T=["x","z","q","w","k","m","r","t","u","i","o"];let u=0;for(let c=0;c<a;c++){const h=c*t,b=Math.random()<.2,$=b?t*1.5:t*.3;let X,C;Math.random()<.7&&u<n.length?(X=n[u],C=!0,u++,u<n.length&&Math.random()<.5&&u--):(X=T[Math.floor(Math.random()*T.length)],C=!1),R.push({time:h,char:X,isTarget:C,type:b?"long":"short",duration:$})}},ge=()=>{const s=Date.now()-oe;for(;D<R.length&&R[D].time<=s+2e3;)ye(R[D]),D++;const t=document.querySelector(".game-area");if(!t)return;const a=t.clientHeight-100,n=-50,T=a-n,u=2e3;A.value.forEach(c=>{const h=Date.now()-c.spawnTime,b=Math.min(h/u,1);c.y=n+T*b,c.y>a+80&&!c.hit&&(c.missed=!0,c.isTarget&&c.char===g.value[w.value]&&te(c))}),A.value=A.value.filter(c=>c.y<a+200),S.value=S.value.filter(c=>Date.now()-c.time<1e3),S.value.forEach(c=>{const h=Date.now()-c.time;c.y-=h*.05}),k.value<=0&&ue(!1),w.value>=g.value.length&&ue(!0)},ye=s=>{const t=document.querySelector(".game-area");if(!t)return;const a=t.clientWidth/G.value.length,n=Math.floor(Math.random()*G.value.length),T={id:J.value++,char:s.char,isTarget:s.isTarget,type:s.type,x:n*a+a/2-30,y:-50,height:s.type==="long"?150:60,spawnTime:Date.now(),hit:!1,missed:!1,duration:s.duration};A.value.push(T)},re=(s,t)=>{if(s.hit||s.missed)return;const a=document.querySelector(".game-area");if(!a)return;const n=a.clientHeight-100,T=Math.abs(s.y-n),u=t.clientX||t.touches[0].clientX,c=t.clientY||t.touches[0].clientY;let h="";T<=50?h="perfect":T<=100?h="good":h="miss";const b=g.value[w.value];if(s.char===b&&h!=="miss")if(s.hit=!0,s.type==="long"){j=s,z=setTimeout(()=>{we(s,h,u,c)},s.duration);const $=()=>{j===s&&(clearTimeout(z),te(s),j=null),document.removeEventListener("mouseup",$),document.removeEventListener("touchend",$)};document.addEventListener("mouseup",$),document.addEventListener("touchend",$)}else ce(s,h,u,c),w.value++;else s.char!==b&&h!=="miss"?_e(s,u,c):te(s)},we=(s,t,a,n)=>{ce(s,t,a,n),w.value++,j=null},ce=(s,t,a,n)=>{s.hit=!0,t==="perfect"?(q.value++,f.value++,N.value="PERFECT!",se("perfect","Perfect!",a,n),U("perfect")):t==="good"&&(Y.value++,f.value++,N.value="GOOD",se("good","Good",a,n),U("good")),f.value>l.value&&(l.value=f.value),f.value>=5&&(Z.value="🔥 FEVER MODE! 🔥")},_e=(s,t,a)=>{s.hit=!0,f.value=0,k.value=Math.max(0,k.value-10),N.value="WRONG!",se("miss",`错了！是 ${g.value[w.value]}`,t,a),W.value++,U("miss")},te=s=>{if(s.missed)return;s.missed=!0,f.value=0,k.value=Math.max(0,k.value-15),N.value="MISS",W.value++,U("miss");const t=document.querySelector(".rhythm-password-game");t&&(t.classList.add("shake"),setTimeout(()=>t.classList.remove("shake"),200))},se=(s,t,a,n)=>{S.value.push({id:me.value++,type:s,text:t,x:a,y:n,time:Date.now()})},ue=s=>{I&&(clearInterval(I),I=null),ee(),s?(p.value=!0,i.value=!1,ke()):(i.value=!0,ne.value=le[Math.floor(Math.random()*le.length)],Ae())},Te=()=>{ee(),i.value=!1,y.value=!1,w.value=0,f.value=0,l.value=0,k.value=100,A.value=[],S.value=[],q.value=0,Y.value=0,W.value=0},be=()=>O.value>=95&&q.value>=g.value.length?"S 级 - 音游之神！":O.value>=85?"A 级 - 优秀！":O.value>=70?"B 级 - 还行~":"C 级 - 勉强通过",xe=()=>{x("success",{password:g.value,accuracy:O.value,combo:l.value,attempts:V.value})},ke=()=>{try{o||(o=new(window.AudioContext||window.webkitAudioContext));const s=o.createOscillator(),t=o.createGain();s.connect(t),t.connect(o.destination),s.frequency.setValueAtTime(523.25,o.currentTime),s.frequency.setValueAtTime(659.25,o.currentTime+.1),s.frequency.setValueAtTime(783.99,o.currentTime+.2),t.gain.setValueAtTime(.3,o.currentTime),t.gain.exponentialRampToValueAtTime(.01,o.currentTime+.5),s.start(o.currentTime),s.stop(o.currentTime+.5)}catch(s){console.log("音效播放失败:",s)}},Ae=()=>{try{o||(o=new(window.AudioContext||window.webkitAudioContext));const s=o.createOscillator(),t=o.createGain();s.connect(t),t.connect(o.destination),s.frequency.setValueAtTime(200,o.currentTime),s.frequency.exponentialRampToValueAtTime(100,o.currentTime+.3),s.type="sawtooth",t.gain.setValueAtTime(.2,o.currentTime),t.gain.exponentialRampToValueAtTime(.01,o.currentTime+.3),s.start(o.currentTime),s.stop(o.currentTime+.3)}catch(s){console.log("音效播放失败:",s)}},U=s=>{try{o||(o=new(window.AudioContext||window.webkitAudioContext));const t=o.createOscillator(),a=o.createGain();t.connect(a),a.connect(o.destination),s==="perfect"?(t.frequency.value=880,a.gain.setValueAtTime(.15,o.currentTime)):s==="good"?(t.frequency.value=660,a.gain.setValueAtTime(.1,o.currentTime)):(t.frequency.value=220,a.gain.setValueAtTime(.08,o.currentTime)),a.gain.exponentialRampToValueAtTime(.01,o.currentTime+.1),t.start(o.currentTime),t.stop(o.currentTime+.1)}catch(t){console.log("音效播放失败:",t)}};return Ce(()=>{I&&clearInterval(I),z&&clearTimeout(z),ee(),o&&o.close()}),(s,t)=>y.value?y.value&&!p.value?(d(),m("div",Re,[e("div",De,[e("div",Be,[t[5]||(t[5]=e("span",{class:"label"},"目标密码：",-1)),(d(!0),m(B,null,F(g.value,(a,n)=>(d(),m("span",{key:n,class:H(["password-char",{completed:n<w.value,current:n===w.value}])},v(a),3))),128))]),e("div",Fe,v(Z.value),1)]),e("div",He,[e("div",Ye,[(d(!0),m(B,null,F(G.value,a=>(d(),m("div",{key:a.id,class:"track"},[...t[6]||(t[6]=[e("div",{class:"judge-line"},null,-1)])]))),128))]),(d(!0),m(B,null,F(A.value,a=>(d(),m("div",{key:a.id,class:H(["note",a.type,{target:a.isTarget}]),style:ae({left:a.x+"px",top:a.y+"px",height:a.height+"px"}),onMousedown:n=>re(a,n),onTouchstart:Se(n=>re(a,n),["prevent"])},[e("span",je,v(a.char),1)],46,We))),128)),(d(!0),m(B,null,F(S.value,a=>(d(),m("div",{key:a.id,class:H(["hit-effect",a.type]),style:ae({left:a.x+"px",top:a.y+"px"})},[e("span",ze,v(a.text),1)],6))),128))],512),e("div",Ke,[e("div",Ue,[t[7]||(t[7]=e("span",{class:"label"},"进度：",-1)),(d(!0),m(B,null,F(g.value,(a,n)=>(d(),m("span",{key:n,class:H(["progress-char",{done:n<w.value}])},v(n<w.value?a:"_"),3))),128))]),e("div",{class:H(["combo-display",{fever:f.value>=5}])},[e("div",Xe,v(f.value),1),t[8]||(t[8]=e("div",{class:"combo-label"},"COMBO",-1))],2),e("div",Je,[e("div",Qe,v(N.value),1),e("div",Ze,[e("div",{class:"hp-fill",style:ae({width:k.value+"%"})},null,4)])])]),i.value?(d(),m("div",et,[e("div",tt,[t[9]||(t[9]=e("h2",null,"💔 再来一次吧~",-1)),e("p",st,v(ne.value),1),e("div",at,[e("p",null,"准确率："+v(O.value)+"%",1),e("p",null,"最高连击："+v(l.value),1)]),e("button",{class:"retry-button",onClick:Te}," 重新挑战 ")])])):L("",!0)])):p.value?(d(),m("div",ot,[t[14]||(t[14]=e("div",{class:"fireworks"},null,-1)),e("div",lt,[t[13]||(t[13]=e("h1",{class:"success-title"},"🎊 恭喜你！终于进来了！",-1)),e("div",nt,[e("div",it,[e("div",rt,v(O.value)+"%",1),t[10]||(t[10]=e("div",{class:"stat-label"},"准确率",-1))]),e("div",ct,[e("div",ut,v(l.value),1),t[11]||(t[11]=e("div",{class:"stat-label"},"最高连击",-1))]),e("div",dt,[e("div",vt,v(V.value),1),t[12]||(t[12]=e("div",{class:"stat-label"},"尝试次数",-1))])]),e("div",mt,[e("div",pt,v(be()),1)]),e("button",{class:"continue-button",onClick:xe}," 确认登录 ")])])):L("",!0):(d(),m("div",{key:0,class:"rhythm-password-container",onClick:pe},[e("div",Ge,[t[1]||(t[1]=e("h1",{class:"neon-title"},"🎮 节奏密码",-1)),t[2]||(t[2]=e("p",{class:"subtitle"},"史上最反人类的密码输入体验",-1)),e("div",Ne,[e("p",null,[t[0]||(t[0]=$e(" 你的密码是：",-1)),e("span",qe,v(g.value),1)])]),t[3]||(t[3]=e("button",{class:"start-button"},"点击开始挑战",-1)),t[4]||(t[4]=e("div",{class:"tips"},[e("p",null,"💡 提示：跟随音乐节奏击打字符"),e("p",null,"⚠️ 必须按正确顺序完成密码输入")],-1))])]))}},ht=ve(ft,[["__scopeId","data-v-ffc2176b"]]),gt={id:"app"},yt={key:0,class:"login-page"},wt={class:"login-container"},_t={key:0,class:"form-group"},Tt={key:1,class:"form-group"},bt={key:2,class:"login-button disabled",disabled:""},xt={key:1,class:"main-page"},kt={class:"welcome-section"},At={class:"user-info"},Mt={class:"username-display"},Ct={class:"stats-summary"},$t={class:"stat-card"},St={class:"stat-content"},Vt={class:"stat-value"},It={class:"stat-card"},Ot={class:"stat-content"},Pt={class:"stat-value"},Lt={class:"stat-card"},Et={class:"stat-content"},Gt={class:"stat-value"},Nt={class:"fun-fact"},qt={__name:"App",setup(E){const _=r(""),x=r(!1),y=r(!1),i=r({accuracy:0,combo:0,attempts:0}),p=["你知道吗？平均每个人需要尝试3-5次才能成功登录！","这个密码输入框的设计灵感来自于产品经理的邪恶笑容 😈","据统计，有87%的用户在第一次尝试时都会失败","最快通关记录是18秒，你能打破吗？",'这个密码框被评为"年度最折磨人的UI设计"第一名',"开发这个功能的工程师表示：我也登不进去","有用户反馈说这比Dark Souls还难...","恭喜你！你已经超越了60%的玩家！"],g=r(0);Ve(()=>{g.value=Math.floor(Math.random()*p.length)});const w=()=>{V()},V=()=>{if(!_.value.trim()){alert("请先输入用户名哦~");return}y.value=!0},G=f=>{i.value=f,x.value=!0,y.value=!1,console.log("登录成功！",f)},A=()=>{x.value=!1,y.value=!1,i.value={accuracy:0,combo:0,attempts:0},g.value=Math.floor(Math.random()*p.length)},J=()=>{const f=`我在节奏密码挑战中获得了 ${i.value.accuracy}% 的准确率，最高连击 ${i.value.combo}！你能超越我吗？🎮🎵`;navigator.share?navigator.share({title:"节奏密码挑战",text:f,url:window.location.href}).catch(l=>console.log("分享取消",l)):navigator.clipboard.writeText(f).then(()=>{alert("成绩已复制到剪贴板！快去分享吧~")}).catch(()=>{alert(f)})};return(f,l)=>(d(),m("div",gt,[x.value?(d(),m("div",xt,[e("div",kt,[l[13]||(l[13]=e("h1",{class:"welcome-title"},"🎊 欢迎回来！",-1)),e("div",At,[e("p",Mt," 用户："+v(_.value||"Guest"),1),e("div",Ct,[e("div",$t,[l[7]||(l[7]=e("div",{class:"stat-icon"},"🎯",-1)),e("div",St,[e("div",Vt,v(i.value.accuracy)+"% ",1),l[6]||(l[6]=e("div",{class:"stat-label"},"准确率",-1))])]),e("div",It,[l[9]||(l[9]=e("div",{class:"stat-icon"},"🔥",-1)),e("div",Ot,[e("div",Pt,v(i.value.combo),1),l[8]||(l[8]=e("div",{class:"stat-label"},"最高连击",-1))])]),e("div",Lt,[l[11]||(l[11]=e("div",{class:"stat-icon"},"🎮",-1)),e("div",Et,[e("div",Gt,v(i.value.attempts),1),l[10]||(l[10]=e("div",{class:"stat-label"},"尝试次数",-1))])])])]),l[14]||(l[14]=e("div",{class:"message-box"},[e("h2",null,"恭喜你完成了这个反人类的登录挑战！"),e("p",null,"你已经成功证明了自己的节奏感和耐心。"),e("p",null,"现在你可以："),e("ul",null,[e("li",null,"炫耀你的成绩给朋友看"),e("li",null,"再来一次挑战更高分数"),e("li",null,"或者就安静地享受这份成就感")])],-1)),e("div",{class:"action-buttons"},[e("button",{onClick:A,class:"action-button logout-btn"}," 退出登录（重新挑战） "),e("button",{onClick:J,class:"action-button share-btn"}," 分享成绩 🎉 ")]),e("div",Nt,[l[12]||(l[12]=e("p",null,"💡 有趣的事实：",-1)),e("p",null,v(p[g.value]),1)])])])):(d(),m("div",yt,[e("div",wt,[l[4]||(l[4]=e("h1",{class:"app-title"},"🎵 欢迎来到音乐世界",-1)),l[5]||(l[5]=e("p",{class:"app-subtitle"},"一个不一样的登录体验",-1)),y.value?L("",!0):(d(),m("div",_t,[l[1]||(l[1]=e("label",null,"用户名",-1)),Oe(e("input",{"onUpdate:modelValue":l[0]||(l[0]=k=>_.value=k),type:"text",placeholder:"请输入用户名",onKeyup:Le(w,["enter"]),class:"normal-input"},null,544),[[Pe,_.value]])])),y.value?L("",!0):(d(),m("div",Tt,[l[3]||(l[3]=e("label",null,"密码",-1)),e("div",{class:"password-input-wrapper",onClick:V},[...l[2]||(l[2]=[e("input",{type:"password",placeholder:"点击输入密码...",readonly:"",class:"password-trigger"},null,-1),e("span",{class:"hint-badge"},"🎮",-1)])])])),y.value?L("",!0):(d(),m("button",bt," 请完成密码输入 "))]),y.value?(d(),Ie(ht,{key:0,onSuccess:G})):L("",!0)]))]))}},Rt=ve(qt,[["__scopeId","data-v-a0bf69ef"]]);Ee(Rt).mount("#app");
//# sourceMappingURL=index-BZwYfLS9.js.map
